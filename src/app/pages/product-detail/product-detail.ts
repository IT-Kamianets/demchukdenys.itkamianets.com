import { Component, OnInit } from '@angular/core';
import { ActivatedRoute, RouterLink } from '@angular/router';
import { DecimalPipe } from '@angular/common';
import { Meta, Title } from '@angular/platform-browser';
import { LightboxComponent } from '../../components/lightbox/lightbox';

@Component({
  selector: 'app-product-detail',
  imports: [RouterLink, DecimalPipe, LightboxComponent],
  templateUrl: './product-detail.html',
  styles: [],
})
export class ProductDetailPage implements OnInit {
  product: any = null;
  lightboxOpen = false;

  private products = [
    {
      id: 1,
      title: 'Кухня «Біла класика»',
      description: 'П-подібна кухня з білими матовими фасадами, дерев\'яною стільницею та темним фартухом.',
      fullDescription: 'П-подібна кухня у білому кольорі - поєднання класичної елегантності та сучасної функціональності. Матові фасади з МДФ із фрезеруванням створюють витончений рельєф. Стільниця з натурального дерева додає теплоти та природності інтер\'єру. Фартух оздоблено темною плиткою, яка ефектно контрастує з білими фасадами. Над робочою зоною - підвісні світильники для додаткового освітлення. Фурнітура Blum з плавним закриванням забезпечує комфорт щоденного використання.',
      price: 85000,
      category: 'kitchen',
      image: 'img/slider/k1.webp',
      specs: [
        { label: 'Матеріал фасадів', value: 'МДФ, матова фарба з фрезеруванням' },
        { label: 'Стільниця', value: 'Натуральне дерево' },
        { label: 'Фурнітура', value: 'Blum (Австрія)' },
        { label: 'Планування', value: 'П-подібне' },
        { label: 'Гарантія', value: '5 років' },
        { label: 'Термін виготовлення', value: '30-40 робочих днів' },
      ],
      features: ['Фрезеровані фасади МДФ', 'Дерев\'яна стільниця', 'Темний фартух з плитки', 'Підвісні світильники'],
    },
    {
      id: 2,
      title: 'Кухня з барною стійкою',
      description: 'Сучасна кухня у сірих тонах з кварцовою стільницею та барною зоною.',
      fullDescription: 'Сучасна кухня у поєднанні сірих та білих тонів із акцентною барною стійкою. Матові сірі фасади з МДФ доповнені стільницею з сірого кварцового агломерату. Барна зона органічно з\'єднує кухню із вітальнею, а м\'які стільці з синього оксамиту додають яскравий акцент. Вбудована техніка інтегрована у фасади для цілісного вигляду. Продумане планування дозволяє одночасно готувати та приймати гостей.',
      price: 120000,
      category: 'kitchen',
      image: 'img/slider/k3.webp',
      specs: [
        { label: 'Матеріал фасадів', value: 'МДФ, матове сіре покриття' },
        { label: 'Стільниця', value: 'Кварцовий агломерат, сірий' },
        { label: 'Фурнітура', value: 'Blum (Австрія)' },
        { label: 'Планування', value: 'Кутове з барною стійкою' },
        { label: 'Гарантія', value: '5 років' },
        { label: 'Термін виготовлення', value: '35-45 робочих днів' },
      ],
      features: ['Барна стійка з оксамитовими стільцями', 'Вбудована техніка', 'Кварцова стільниця', 'Поєднання сірого та білого'],
    },
    {
      id: 3,
      title: 'Кухня «Мінімалізм»',
      description: 'Пряма кухня у бежевих тонах з вбудованою технікою: духова шафа, мікрохвильовка, газова поверхня.',
      fullDescription: 'Пряма кухня у стилі мінімалізм із фасадами у ніжному бежевому відтінку. Гладкі поверхні без видимих ручок - система push-to-open забезпечує лаконічний зовнішній вигляд. Зліва вбудована колонка з духовою шафою та мікрохвильовою піччю. Газова варильна поверхня вмонтована у стільницю. Верхні шафи до стелі максимально використовують вертикальний простір для зберігання. Ідеальне рішення для невеликих кухонь.',
      price: 65000,
      category: 'kitchen',
      image: 'img/services/k4.webp',
      specs: [
        { label: 'Матеріал фасадів', value: 'МДФ, бежеве покриття' },
        { label: 'Стільниця', value: 'Кварцовий агломерат, бежевий' },
        { label: 'Фурнітура', value: 'Blum (Австрія)' },
        { label: 'Планування', value: 'Пряме' },
        { label: 'Гарантія', value: '5 років' },
        { label: 'Термін виготовлення', value: '25-35 робочих днів' },
      ],
      features: ['Система push-to-open', 'Вбудована духова шафа та мікрохвильовка', 'Шафи до стелі', 'Газова варильна поверхня'],
    },
    {
      id: 4,
      title: 'Комод на металевому каркасі',
      description: 'Сучасний комод з темно-сірими фасадами та білою стільницею на чорному металевому каркасі.',
      fullDescription: 'Сучасний комод у стилі лофт для спальні або вітальні. Корпус з темно-сірими матовими фасадами встановлений на чорний металевий каркас, що додає виробу візуальної легкості. Біла стільниця створює елегантний контраст із темними фасадами. Чотири просторі ящики з прихованими напрямними забезпечують плавне та безшумне відкривання. Мінімалістичні чорні ручки підкреслюють сучасний стиль.',
      price: 18500,
      category: 'furniture',
      image: 'img/services/m4.webp',
      specs: [
        { label: 'Матеріал корпусу', value: 'МДФ, матове покриття' },
        { label: 'Стільниця', value: 'МДФ, білий' },
        { label: 'Каркас', value: 'Метал, чорне порошкове покриття' },
        { label: 'Кількість ящиків', value: '4' },
        { label: 'Гарантія', value: '3 роки' },
        { label: 'Термін виготовлення', value: '14-20 робочих днів' },
      ],
      features: ['Металевий каркас у стилі лофт', 'Приховані напрямні з доводчиком', 'Контрастна біла стільниця', 'Мінімалістичний дизайн'],
    },
    {
      id: 5,
      title: 'Гардеробна система',
      description: 'Вбудована гардеробна з білими глянцевими фасадами, дзеркальною секцією та робочим столом.',
      fullDescription: 'Вбудована гардеробна система від стіни до стіни - максимальне використання простору кімнати. Білі глянцеві фасади з чорними акцентними елементами створюють сучасний контрастний вигляд. Ліва частина включає дзеркальну секцію та вбудований робочий стіл з темною стільницею - ідеальне поєднання зони зберігання та робочого місця. Правий блок - повноцінна шафа з розпашними дверцятами. Фурнітура Hettich забезпечує довговічність конструкції.',
      price: 45000,
      category: 'furniture',
      image: 'img/services/p4.webp',
      specs: [
        { label: 'Матеріал корпусу', value: 'ЛДСП Egger 18 мм' },
        { label: 'Фасади', value: 'МДФ, білий глянець' },
        { label: 'Акценти', value: 'Чорний профіль' },
        { label: 'Фурнітура', value: 'Hettich (Німеччина)' },
        { label: 'Гарантія', value: '5 років' },
        { label: 'Термін виготовлення', value: '25-35 робочих днів' },
      ],
      features: ['Дзеркальна секція', 'Вбудований робочий стіл', 'Білий глянець з чорними акцентами', 'Від стіни до стіни'],
    },
    {
      id: 6,
      title: 'Спальний гарнітур',
      description: 'Ліжко з м\'яким узголів\'ям та каркасом зі світлого дерева, висувні ящики, приліжкова тумба.',
      fullDescription: 'Спальний гарнітур, виготовлений на замовлення для створення затишної та функціональної спальні. Ліжко з м\'яким узголів\'ям, оббитим темною тканиною, та каркасом зі світлого дерева з вбудованими висувними ящиками для білизни. Приліжкова тумба у тому ж стилі - поєднання світлого дерева та темних акцентних елементів. Гарнітур розроблений з акцентом на ергономіку та раціональне використання простору.',
      price: 35000,
      category: 'furniture',
      image: 'img/slider/m1.webp',
      specs: [
        { label: 'Матеріал каркасу', value: 'ЛДСП, світле дерево' },
        { label: 'Узголів\'я', value: 'М\'яке, темна тканина' },
        { label: 'Розмір ліжка', value: '160 × 200 см' },
        { label: 'Зберігання', value: 'Висувні ящики під ліжком' },
        { label: 'Гарантія', value: '3 роки' },
        { label: 'Термін виготовлення', value: '20-30 робочих днів' },
      ],
      features: ['М\'яке узголів\'я з тканини', 'Висувні ящики для білизни', 'Приліжкова тумба в комплекті', 'Каркас зі світлого дерева'],
    },
  ];

  constructor(private route: ActivatedRoute, private title: Title, private meta: Meta) {}

  ngOnInit() {
    const id = Number(this.route.snapshot.paramMap.get('id'));
    this.product = this.products.find(p => p.id === id) || this.products[0];
    this.title.setTitle(`${this.product.title} - Demchuk Denys`);
    this.meta.updateTag({ name: 'description', content: this.product.fullDescription.substring(0, 160) });
    this.meta.updateTag({ property: 'og:title', content: this.product.title });
    this.meta.updateTag({ property: 'og:description', content: this.product.fullDescription.substring(0, 160) });
  }
}
